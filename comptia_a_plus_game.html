<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CompTIA A+ Annihilator Game (New A+ Updated)</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: #fff;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            transition: background 0.5s;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }
        h1 {
            color: #1e3c72;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        .mode-toggle {
            text-align: center;
            margin-bottom: 20px;
        }
        button {
            padding: 12px 24px;
            margin: 5px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: transform 0.2s, background 0.3s, box-shadow 0.3s;
        }
        button:hover {
            background: #0056b3;
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.5);
        }
        button.active {
            background: #004085;
            transform: scale(1.1);
        }
        button.inactive {
            background: #6c757d;
        }
        .flashcard-container, .matching-container {
            display: none;
        }
        .flashcard {
            width: 400px;
            height: 250px;
            max-width: 100%;
            margin: 20px auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            perspective: 1000px;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
            border-radius: 12px;
            font-size: 1.2em;
            color: #333;
        }
        .flashcard-front {
            background: #f9f9f9;
        }
        .flashcard-back {
            background: #e0f7fa;
            transform: rotateY(180deg);
        }
        .matching-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        .matching-status {
            width: 100%;
            text-align: center;
        }
        .matching-content {
            display: flex;
            justify-content: space-between;
            width: 100%;
            gap: 20px;
        }
        .matching-terms, .matching-definitions {
            width: 48%;
            height: 400px;
            padding: 15px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border: 2px solid #333;
            overflow-y: auto;
        }
        .matching-item {
            padding: 10px;
            margin: 5px 0;
            border-radius: 6px;
            cursor: pointer;
            color: #000;
            font-size: 1em;
            font-weight: 500;
            transition: transform 0.3s ease-in-out, opacity 0.5s, box-shadow 0.3s;
            overflow-wrap: break-word;
            max-width: 100%;
            box-sizing: border-box;
        }
        .matching-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.5);
        }
        .selected {
            background: #bbdefb;
            border: 2px solid #1976d2;
            transform: scale(1.1);
        }
        .correct {
            background: #c8e6c9;
            border: 2px solid #388e3c;
            color: #2e7d32;
            animation: pop 0.5s forwards;
            position: relative;
        }
        .incorrect {
            background: #ffcdd2;
            border: 2px solid #d32f2f;
            color: #c62828;
            animation: shake 0.3s;
        }
        h3 {
            color: #1e3c72;
            margin: 0 0 10px 0;
            text-align: center;
        }
        #matches-left, #score, #section-label, #progress {
            color: #1e3c72;
            font-size: 1.2em;
            margin: 5px 0;
        }
        .category-key {
            width: 100%;
            text-align: center;
            margin-bottom: 15px;
            font-size: 0.9em;
        }
        .category-key button {
            margin: 5px;
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            color: #333;
            transition: transform 0.3s, border 0.3s, background 0.3s;
        }
        .category-key button.active-category {
            border: 2px solid #1e3c72;
            transform: scale(1.1);
        }
        .category-key button:hover {
            background: rgba(0, 123, 255, 0.2);
        }
        .core1-header, .core2-header {
            font-weight: bold;
            color: #1e3c72;
            margin: 10px 0;
            font-size: 1.1em;
        }
        .mobile { background: #e3f2fd; }
        .networking { background: #b3e5fc; }
        .hardware { background: #c8e6c9; }
        .virt-cloud { background: #f3e5f5; }
        .troubleshooting { background: #fff3e0; }
        .os { background: #f0f4c3; }
        .security { background: #ffcdd2; }
        .soft-trouble { background: #dcedc8; }
        .ops { background: #e0f7fa; }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffd700;
            border-radius: 50%;
            animation: confetti-fall 1s ease-out forwards;
        }
        #victory-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
            font-size: 2em;
            color: #388e3c;
            display: none;
            animation: slide-in 0.5s ease-in-out, pulse 1s infinite;
        }
        .progress-bar {
            width: 80%;
            height: 10px;
            background: #ddd;
            border-radius: 5px;
            margin: 10px auto;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #388e3c;
            transition: width 0.5s ease;
        }
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            max-width: 500px;
            width: 90%;
            z-index: 1000;
        }
        .modal h4 {
            color: #1e3c72;
            margin: 0 0 10px 0;
        }
        .modal p {
            color: #333;
            margin: 10px 0;
        }
        .modal button {
            background: #388e3c;
            margin: 0 auto;
            display: block;
        }
        .modal button:hover {
            background: #2e7d32;
        }
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 0; }
        }
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        @keyframes confetti-fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100px) rotate(360deg); opacity: 0; }
        }
        @keyframes slide-in {
            0% { transform: translate(-50%, -100%); opacity: 0; }
            100% { transform: translate(-50%, -50%); opacity: 1; }
        }
        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>CompTIA A+ Annihilator Game (New A+ Updated)</h1>
        <div class="mode-toggle">
            <button id="flashcard-btn" onclick="showFlashcards()" aria-label="Switch to Flashcard Mode">Flashcard Mode</button>
            <button id="matching-btn" onclick="showMatching()" aria-label="Switch to Matching Mode">Matching Mode</button>
        </div>

        <!-- Flashcard Mode -->
        <div id="flashcard-container" class="flashcard-container">
            <div id="flashcard" class="flashcard">
                <div class="flashcard-front"></div>
                <div class="flashcard-back"></div>
            </div>
            <button onclick="nextFlashcard()">Next Card</button>
        </div>

        <!-- Matching Mode -->
        <div id="matching-container" class="matching-container">
            <div class="matching-status">
                <div id="matches-left"></div>
                <div id="score"></div>
                <div id="progress"></div>
                <div id="section-label"></div>
            </div>
            <div class="category-key" id="category-key">
                <div class="core1-header">Core 1 (220-1201)</div>
                <button class="mobile" data-category="mobile" onclick="switchCategory('mobile')">Mobile</button>
                <button class="networking" data-category="networking" onclick="switchCategory('networking')">Networking</button>
                <button class="hardware" data-category="hardware" onclick="switchCategory('hardware')">Hardware</button>
                <button class="virt-cloud" data-category="virt-cloud" onclick="switchCategory('virt-cloud')">Virt/Cloud</button>
                <button class="troubleshooting" data-category="troubleshooting" onclick="switchCategory('troubleshooting')">Troubleshooting</button>
                <div class="core2-header">Core 2 (220-1202)</div>
                <button class="os" data-category="os" onclick="switchCategory('os')">OS</button>
                <button class="security" data-category="security" onclick="switchCategory('security')">Security</button>
                <button class="soft-trouble" data-category="soft-trouble" onclick="switchCategory('soft-trouble')">Software Trouble</button>
                <button class="ops" data-category="ops" onclick="switchCategory('ops')">Ops</button>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="matching-content">
                <div class="matching-terms" id="matching-terms"></div>
                <div class="matching-definitions" id="matching-definitions"></div>
            </div>
            <div style="width: 100%; text-align: center; margin-top: 20px;">
                <button onclick="resetMatching()">Reset</button>
            </div>
        </div>
        <div id="victory-message">A+ Master!</div>
        <div class="modal-overlay" onclick="closeModal()"></div>
        <div id="explanation-modal" class="modal" role="dialog" aria-labelledby="modal-title">
            <h4 id="modal-title"></h4>
            <p id="modal-definition"></p>
            <p id="modal-explanation"></p>
            <button onclick="closeModal()">Close</button>
        </div>
    </div>

    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        const flashcards = [
            // Core 1: Mobile Devices (220-1201) - 12 flashcards
            { front: "What connector is standard for modern mobile charging?", back: "USB-C", category: "mobile" },
            { front: "What does OLED improve in mobile displays?", back: "Organic Light-Emitting Diode, better color and efficiency", category: "mobile" },
            { front: "What protocol syncs email across devices?", back: "IMAP (Internet Message Access Protocol)", category: "mobile" },
            { front: "What is NFC commonly used for?", back: "Near Field Communication, e.g., mobile payments", category: "mobile" },
            { front: "What component converts touch to digital input?", back: "Digitizer", category: "mobile" },
            { front: "What is eSIM technology?", back: "Embedded SIM, programmable SIM in devices", category: "mobile" },
            { front: "What wireless tech connects mobile accessories?", back: "Bluetooth", category: "mobile" },
            { front: "What provides fast mobile data?", back: "LTE (Long-Term Evolution)", category: "mobile" },
            { front: "What configures mobile network access?", back: "APN (Access Point Name)", category: "mobile" },
            { front: "What sensor detects device orientation?", back: "Gyroscope", category: "mobile" },
            { front: "What battery type powers most mobiles?", back: "Li-ion (Lithium-ion)", category: "mobile" },
            { front: "What manages mobile devices in an org?", back: "MDM (Mobile Device Management)", category: "mobile" },

            // Core 1: Networking (220-1201) - 12 flashcards
            { front: "What port does HTTPS use?", back: "Port 443", category: "networking" },
            { front: "What does DHCP assign?", back: "IP addresses dynamically", category: "networking" },
            { front: "What is a VPN used for?", back: "Secure remote network access", category: "networking" },
            { front: "What protocol resolves IP to MAC?", back: "ARP (Address Resolution Protocol)", category: "networking" },
            { front: "What is the speed of Wi-Fi 6E?", back: "Up to 9.6 Gbps, uses 6 GHz band", category: "networking" },
            { front: "What is Zero Trust in networking?", back: "Verify every device/user, no assumed trust", category: "networking" },
            { front: "What translates domain names to IPs?", back: "DNS (Domain Name System)", category: "networking" },
            { front: "What protocol ensures reliable data transfer?", back: "TCP (Transmission Control Protocol)", category: "networking" },
            { front: "What protocol is fast but connectionless?", back: "UDP (User Datagram Protocol)", category: "networking" },
            { front: "What maps private IPs to public?", back: "NAT (Network Address Translation)", category: "networking" },
            { front: "What cable supports 40 Gbps over 30m?", back: "CAT8", category: "networking" },
            { front: "What identifies a wireless network?", back: "SSID (Service Set Identifier)", category: "networking" },

            // Core 1: Hardware (220-1201) - 12 flashcards
            { front: "What powers PC components?", back: "PSU (Power Supply Unit), converts AC to DC", category: "hardware" },
            { front: "What is NVMe used for?", back: "High-speed SSD interface over PCIe", category: "hardware" },
            { front: "What connects a GPU to a monitor?", back: "HDMI, DisplayPort, or DVI", category: "hardware" },
            { front: "What is a TPM’s role?", back: "Trusted Platform Module, secures encryption keys", category: "hardware" },
            { front: "What is the max USB 4 speed?", back: "40 Gbps", category: "hardware" },
            { front: "What does RAID 10 combine?", back: "Striping and mirroring", category: "hardware" },
            { front: "What interface connects storage drives?", back: "SATA (Serial ATA)", category: "hardware" },
            { front: "What is a common desktop RAM type?", back: "DIMM (Dual In-line Memory Module)", category: "hardware" },
            { front: "What initializes hardware at boot?", back: "BIOS (Basic Input/Output System)", category: "hardware" },
            { front: "What is a compact SSD form factor?", back: "M.2", category: "hardware" },
            { front: "What holds the processor?", back: "CPU Socket (e.g., LGA)", category: "hardware" },
            { front: "What cools the CPU?", back: "Heatsink", category: "hardware" },

            // Core 1: Virtualization and Cloud (220-1201) - 11 flashcards
            { front: "What manages virtual machines?", back: "Hypervisor (e.g., VMware, Hyper-V)", category: "virt-cloud" },
            { front: "What is SaaS?", back: "Software as a Service, e.g., cloud apps", category: "virt-cloud" },
            { front: "What is a hybrid cloud?", back: "Mix of public and private cloud resources", category: "virt-cloud" },
            { front: "What is client-side virtualization?", back: "Running VMs on a local device", category: "virt-cloud" },
            { front: "What is IaaS?", back: "Infrastructure as a Service, e.g., virtual servers", category: "virt-cloud" },
            { front: "What is PaaS?", back: "Platform as a Service, e.g., app development", category: "virt-cloud" },
            { front: "What delivers virtual desktops?", back: "VDI (Virtual Desktop Infrastructure)", category: "virt-cloud" },
            { front: "What runs directly on hardware?", back: "Type 1 Hypervisor", category: "virt-cloud" },
            { front: "What is a shared cloud resource?", back: "Public Cloud", category: "virt-cloud" },
            { front: "What is a dedicated cloud?", back: "Private Cloud", category: "virt-cloud" },
            { front: "What is Type 2 Hypervisor?", back: "Runs on top of an OS", category: "virt-cloud" },

            // Core 1: Troubleshooting (220-1201) - 11 flashcards
            { front: "First step if a PC won’t boot?", back: "Check power connections", category: "troubleshooting" },
            { front: "What causes a CPU to overheat?", back: "Dust, failed fans, or bad thermal paste", category: "troubleshooting" },
            { front: "How to fix no Wi-Fi signal?", back: "Check adapter, signal strength, interference", category: "troubleshooting" },
            { front: "What does a POST error beep mean?", back: "Hardware failure detected", category: "troubleshooting" },
            { front: "What if there’s no display?", back: "Check monitor or GPU connection", category: "troubleshooting" },
            { front: "What causes slow drive performance?", back: "Failing HDD/SSD", category: "troubleshooting" },
            { front: "How to fix a printer jam?", back: "Remove stuck paper", category: "troubleshooting" },
            { front: "What does a blue power light mean?", back: "Check PSU status", category: "troubleshooting" },
            { front: "What if the network drops?", back: "Test cable or signal", category: "troubleshooting" },
            { front: "How to fix an overheating GPU?", back: "Clean fans or reapply paste", category: "troubleshooting" },
            { front: "What if a device isn’t recognized?", back: "Check cables or drivers", category: "troubleshooting" },

            // Core 2: Operating Systems (220-1202) - 11 flashcards
            { front: "Windows command for network info?", back: "ipconfig", category: "os" },
            { front: "Linux command to change permissions?", back: "chmod", category: "os" },
            { front: "What does 'sfc /scannow' do?", back: "Scans and repairs Windows system files", category: "os" },
            { front: "What is 'diskpart' used for?", back: "Manages disk partitions", category: "os" },
            { front: "What does 'net use' map?", back: "Network drives in Windows", category: "os" },
            { front: "What controls startup programs?", back: "msconfig", category: "os" },
            { front: "What edits the Windows registry?", back: "regedit", category: "os" },
            { front: "What checks disk errors?", back: "chkdsk", category: "os" },
            { front: "Linux command for superuser access?", back: "sudo", category: "os" },
            { front: "What traces a network route?", back: "tracert", category: "os" },
            { front: "What shows running processes?", back: "Task Manager", category: "os" },

            // Core 2: Security (220-1202) - 12 flashcards
            { front: "What is phishing?", back: "Fraudulent emails to steal data", category: "security" },
            { front: "What does MFA add to security?", back: "Multi-Factor Authentication, extra verification", category: "security" },
            { front: "What is a DDoS attack?", back: "Floods a server to disrupt service", category: "security" },
            { front: "What encrypts a Windows drive?", back: "BitLocker", category: "security" },
            { front: "What is AI’s role in security?", back: "Detects threats using pattern analysis", category: "security" },
            { front: "What locks data for ransom?", back: "Ransomware", category: "security" },
            { front: "What encrypts network traffic?", back: "SSL/TLS", category: "security" },
            { front: "What records keystrokes?", back: "Keylogger", category: "security" },
            { front: "What tries all password combos?", back: "Brute Force", category: "security" },
            { front: "What blocks unauthorized access?", back: "Firewall", category: "security" },
            { front: "What manipulates users for info?", back: "Social Engineering", category: "security" },
            { front: "What secures remote connections?", back: "VPN", category: "security" },

            // Core 2: Software Troubleshooting (220-1202) - 11 flashcards
            { front: "What causes a BSOD?", back: "Driver or hardware failure", category: "soft-trouble" },
            {RESHOLD: "How to fix a slow PC?", back: "Check disk space, malware, or resource usage", category: "soft-trouble" },
            { front: "What does 'DISM' repair?", back: "Windows system image", category: "soft-trouble" },
            { front: "How to stop a frozen app?", back: "Use Task Manager to end task", category: "soft-trouble" },
            { front: "How to remove malware?", back: "Run antivirus software", category: "soft-trouble" },
            { front: "What boots with minimal drivers?", back: "Safe Mode", category: "soft-trouble" },
            { front: "How to fix hardware conflicts?", back: "Update drivers", category: "soft-trouble" },
            { front: "What to do if an app crashes?", back: "Check logs or reinstall", category: "soft-trouble" },
            { front: "How to fix low memory issues?", back: "Close apps or add RAM", category: "soft-trouble" },
            { front: "How to fix a corrupt file?", back: "Replace or repair it", category: "soft-trouble" },
            { front: "What tool monitors performance?", back: "Performance Monitor", category: "soft-trouble" },

            // Core 2: Operational Procedures (220-1202) - 10 flashcards
            { front: "First step in troubleshooting?", back: "Identify the problem", category: "ops" },
            { front: "What protects against ESD?", back: "Anti-static wrist strap", category: "ops" },
            { front: "What is a UPS?", back: "Uninterruptible Power Supply, backup power", category: "ops" },
            { front: "What is an incremental backup?", back: "Saves only changed files", category: "ops" },
            { front: "What saves all data?", back: "Full Backup", category: "ops" },
            { front: "What guards against voltage spikes?", back: "Surge Protector", category: "ops" },
            { front: "What is an RMA?", back: "Return Merchandise Authorization", category: "ops" },
            { front: "What records issues and solutions?", back: "Documentation", category: "ops" },
            { front: "What grounds static during repairs?", back: "ESD Mat", category: "ops" },
            { front: "What plans system updates?", back: "Change Management", category: "ops" }
        ];

        const matchingPairs = [
            // Core 1: Mobile Devices (220-1201) - 12 items
            { term: "USB-C", definition: "Standard for modern mobile charging", category: "mobile" },
            { term: "OLED", definition: "Improves display color and efficiency", category: "mobile" },
            { term: "IMAP", definition: "Syncs email across devices", category: "mobile" },
            { term: "NFC", definition: "Enables contactless payments", category: "mobile" },
            { term: "Digitizer", definition: "Converts touch to digital input", category: "mobile" },
            { term: "eSIM", definition: "Programmable SIM embedded in devices", category: "mobile" },
            { term: "Bluetooth", definition: "Short-range wireless for accessories", category: "mobile" },
            { term: "LTE", definition: "Provides fast mobile data", category: "mobile" },
            { term: "APN", definition: "Configures mobile network access", category: "mobile" },
            { term: "Gyroscope", definition: "Detects device orientation", category: "mobile" },
            { term: "Li-ion Battery", definition: "Common rechargeable power source", category: "mobile" },
            { term: "MDM", definition: "Manages mobile devices remotely", category: "mobile" },

            // Core 1: Networking (220-1201) - 12 items
            { term: "HTTPS", definition: "Uses port 443 for secure web", category: "networking" },
            { term: "DHCP", definition: "Assigns IP addresses dynamically", category: "networking" },
            { term: "VPN", definition: "Secures remote network access", category: "networking" },
            { term: "ARP", definition: "Resolves IP to MAC addresses", category: "networking" },
            { term: "Wi-Fi 6E", definition: "Up to 9.6 Gbps, uses 6 GHz band", category: "networking" },
            { term: "Zero Trust", definition: "Verifies all devices/users", category: "networking" },
            { term: "DNS", definition: "Translates domain names to IPs", category: "networking" },
            { term: "TCP", definition: "Ensures reliable data transfer", category: "networking" },
            { term: "UDP", definition: "Fast, connectionless data transfer", category: "networking" },
            { term: "NAT", definition: "Maps private IPs to public", category: "networking" },
            { term: "CAT8", definition: "Supports 40 Gbps over 30 meters", category: "networking" },
            { term: "SSID", definition: "Identifies a wireless network", category: "networking" },

            // Core 1: Hardware (220-1201) - 12 items
            { term: "PSU", definition: "Converts AC to DC for components", category: "hardware" },
            { term: "NVMe", definition: "High-speed SSD over PCIe", category: "hardware" },
            { term: "GPU Connection", definition: "HDMI, DisplayPort, or DVI", category: "hardware" },
            { term: "TPM", definition: "Secures encryption keys", category: "hardware" },
            { term: "USB 4", definition: "Supports 40 Gbps data transfer", category: "hardware" },
            { term: "RAID 10", definition: "Combines striping and mirroring", category: "hardware" },
            { term: "SATA", definition: "Connects storage drives", category: "hardware" },
            { term: "DIMM", definition: "Desktop RAM module", category: "hardware" },
            { term: "BIOS", definition: "Initializes hardware at boot", category: "hardware" },
            { term: "M.2", definition: "Compact SSD form factor", category: "hardware" },
            { term: "CPU Socket", definition: "Holds processor (e.g., LGA)", category: "hardware" },
            { term: "Heatsink", definition: "Dissipates CPU heat", category: "hardware" },

            // Core 1: Virtualization and Cloud (220-1201) - 10 items
            { term: "Hypervisor", definition: "Manages virtual machines", category: "virt-cloud" },
            { term: "SaaS", definition: "Delivers software via the cloud", category: "virt-cloud" },
            { term: "Hybrid Cloud", definition: "Mixes public and private clouds", category: "virt-cloud" },
            { term: "Client-side Virtualization", definition: "Running VMs on a local device", category: "virt-cloud" },
            { term: "IaaS", definition: "Provides virtual infrastructure", category: "virt-cloud" },
            { term: "PaaS", definition: "Platform for app development", category: "virt-cloud" },
            { term: "VDI", definition: "Virtual desktops hosted remotely", category: "virt-cloud" },
            { term: "Type 1 Hypervisor", definition: "Runs directly on hardware", category: "virt-cloud" },
            { term: "Public Cloud", definition: "Shared cloud resources", category: "virt-cloud" },
            { term: "Private Cloud", definition: "Dedicated cloud for one org", category: "virt-cloud" },

            // Core 1: Troubleshooting (220-1201) - 10 items
            { term: "No Boot", definition: "Check power connections", category: "troubleshooting" },
            { term: "CPU Overheating", definition: "Dust, failed fans, or bad paste", category: "troubleshooting" },
            { term: "No Wi-Fi", definition: "Check adapter or interference", category: "troubleshooting" },
            { term: "POST Beep", definition: "Signals hardware failure", category: "troubleshooting" },
            { term: "No Display", definition: "Check monitor or GPU connection", category: "troubleshooting" },
            { term: "Slow Drive", definition: "Test for failing HDD/SSD", category: "troubleshooting" },
            { term: "Printer Jam", definition: "Remove stuck paper", category: "troubleshooting" },
            { term: "Blue Light", definition: "Check power supply status", category: "troubleshooting" },
            { term: "Network Drop", definition: "Test cable or signal", category: "troubleshooting" },
            { term: "Overheating GPU", definition: "Clean fans or reapply paste", category: "troubleshooting" },

            // Core 2: Operating Systems (220-1202) - 10 items
            { term: "ipconfig", definition: "Shows network info in Windows", category: "os" },
            { term: "chmod", definition: "Changes Linux file permissions", category: "os" },
            { term: "sfc /scannow", definition: "Repairs Windows system files", category: "os" },
            { term: "diskpart", definition: "Manages disk partitions", category: "os" },
            { term: "net use", definition: "Maps network drives in Windows", category: "os" },
            { term: "msconfig", definition: "Controls startup programs", category: "os" },
            { term: "regedit", definition: "Edits Windows registry", category: "os" },
            { term: "chkdsk", definition: "Checks and fixes disk errors", category: "os" },
            { term: "sudo", definition: "Runs commands as superuser", category: "os" },
            { term: "tracert", definition: "Traces network route", category: "os" },

            // Core 2: Security (220-1202) - 12 items
            { term: "Phishing", definition: "Fraudulent email attack", category: "security" },
            { term: "MFA", definition: "Adds extra security verification", category: "security" },
            { term: "DDoS", definition: "Overwhelms a server", category: "security" },
            { term: "BitLocker", definition: "Encrypts Windows drives", category: "security" },
            { term: "AI Security", definition: "Uses patterns to detect threats", category: "security" },
            { term: "Ransomware", definition: "Locks data for ransom", category: "security" },
            { term: "SSL/TLS", definition: "Encrypts network traffic", category: "security" },
            { term: "Keylogger", definition: "Records keystrokes", category: "security" },
            { term: "Brute Force", definition: "Tries all password combos", category: "security" },
            { term: "Firewall", definition: "Blocks unauthorized access", category: "security" },
            { term: "Social Engineering", definition: "Manipulates users for info", category: "security" },
            { term: "VPN Security", definition: "Secures remote connections", category: "security" },

            // Core 2: Software Troubleshooting (220-1202) - 10 items
            { term: "BSOD", definition: "Caused by driver or hardware issues", category: "soft-trouble" },
            { term: "Slow PC", definition: "Check disk space or malware", category: "soft-trouble" },
            { term: "DISM", definition: "Repairs Windows system image", category: "soft-trouble" },
            { term: "Frozen App", definition: "Use Task Manager to end task", category: "soft-trouble" },
            { term: "Malware", definition: "Run antivirus to remove", category: "soft-trouble" },
            { term: "Safe Mode", definition: "Boots with minimal drivers", category: "soft-trouble" },
            { term: "Driver Update", definition: "Fixes hardware conflicts", category: "soft-trouble" },
            { term: "App Crash", definition: "Check logs or reinstall", category: "soft-trouble" },
            { term: "Low Memory", definition: "Close apps or add RAM", category: "soft-trouble" },
            { term: "Corrupt File", definition: "Replace or repair file", category: "soft-trouble" },

            // Core 2: Operational Procedures (220-1202) - 10 items
            { term: "Troubleshooting Step 1", definition: "Identify the problem", category: "ops" },
            { term: "ESD Protection", definition: "Anti-static wrist strap", category: "ops" },
            { term: "UPS", definition: "Provides backup power", category: "ops" },
            { term: "Incremental Backup", definition: "Saves only changed files", category: "ops" },
            { term: "Full Backup", definition: "Saves all data", category: "ops" },
            { term: "Surge Protector", definition: "Guards against voltage spikes", category: "ops" },
            { term: "RMA", definition: "Process for returning faulty items", category: "ops" },
            { term: "Documentation", definition: "Records issue and solution", category: "ops" },
            { term: "ESD Mat", definition: "Grounds static during repairs", category: "ops" },
            { term: "Change Management", definition: "Plans system updates", category: "ops" }
        ];

        const explanations = {
            // Core 1: Mobile Devices
            "USB-C": "The Universal Serial Bus Type-C connector is widely used for charging modern mobile devices because it’s small, reversible, and supports fast data transfer and power delivery.",
            "OLED": "Organic Light-Emitting Diode displays use organic materials to emit light, offering better color accuracy and energy efficiency for mobile screens.",
            "IMAP": "Internet Message Access Protocol keeps emails synchronized across multiple devices by storing them on a server, ideal for mobile use.",
            "NFC": "Near Field Communication allows devices to exchange data wirelessly over short distances, commonly used for quick payments with a phone tap.",
            "Digitizer": "A digitizer converts physical touch on a screen into digital signals, enabling touch functionality on mobile devices.",
            "eSIM": "An embedded SIM is built into a device and can be programmed remotely, replacing physical SIM cards for easier carrier switching.",
            "Bluetooth": "Bluetooth enables short-range wireless connections for accessories like headphones or keyboards on mobile devices.",
            "LTE": "Long-Term Evolution provides fast mobile data speeds, improving browsing and streaming on cellular networks.",
            "APN": "Access Point Name configures a mobile device’s connection to a carrier’s network for data access.",
            "Gyroscope": "A gyroscope detects a device’s orientation, enabling features like screen rotation or motion gaming.",
            "Li-ion Battery": "Lithium-ion batteries are rechargeable and power most mobile devices due to their high energy density.",
            "MDM": "Mobile Device Management allows remote control and security enforcement on mobile devices in an organization.",

            // Core 1: Networking
            "HTTPS": "HyperText Transfer Protocol Secure uses port 443 to encrypt web traffic, ensuring safe browsing.",
            "DHCP": "Dynamic Host Configuration Protocol assigns unique network addresses to devices automatically, simplifying network setup.",
            "VPN": "A Virtual Private Network creates a secure connection over the internet, protecting data when accessing networks remotely.",
            "ARP": "Address Resolution Protocol maps Internet Protocol addresses to physical MAC addresses on a network.",
            "Wi-Fi 6E": "Wi-Fi 6 Extended uses the 6 GHz band for faster wireless speeds and less interference, ideal for modern networks.",
            "Zero Trust": "Zero Trust security assumes no device or user is trusted by default, requiring constant verification to prevent breaches.",
            "DNS": "Domain Name System translates human-readable website names into numeric IP addresses for network access.",
            "TCP": "Transmission Control Protocol ensures reliable data delivery by checking for errors and retransmitting if needed.",
            "UDP": "User Datagram Protocol sends data quickly without error checking, ideal for streaming or gaming.",
            "NAT": "Network Address Translation maps private IP addresses to a public one, allowing multiple devices to share an internet connection.",
            "CAT8": "Category 8 cable supports data speeds up to 40 gigabits per second over short distances, used in high-performance networks.",
            "SSID": "Service Set Identifier is the name of a wireless network, helping users identify and connect to it.",

            // Core 1: Hardware
            "PSU": "The Power Supply Unit converts alternating current from the wall into direct current to power computer components.",
            "NVMe": "Non-Volatile Memory Express boosts solid-state drive speeds by using the Peripheral Component Interconnect Express interface.",
            "GPU Connection": "Graphics Processing Units connect to monitors using cables like High-Definition Multimedia Interface, DisplayPort, or Digital Visual Interface.",
            "TPM": "The Trusted Platform Module is a chip that stores encryption keys and verifies system integrity for enhanced security.",
            "USB 4": "Universal Serial Bus version 4 offers data transfer speeds up to 40 gigabits per second, doubling USB 3’s capability.",
            "RAID 10": "Redundant Array of Independent Disks level 10 combines data striping for speed and mirroring for redundancy.",
            "SATA": "Serial Advanced Technology Attachment connects storage drives like hard disks or SSDs to the motherboard.",
            "DIMM": "Dual In-line Memory Module is a type of RAM used in desktops for high-speed program execution.",
            "BIOS": "Basic Input/Output System initializes hardware during a computer’s boot process, loading the operating system.",
            "M.2": "M.2 is a compact form factor for solid-state drives, offering fast storage in small devices.",
            "CPU Socket": "A CPU socket, like Land Grid Array, physically holds and connects the processor to the motherboard.",
            "Heatsink": "A heatsink dissipates heat from the CPU, preventing overheating during operation.",

            // Core 1: Virtualization and Cloud
            "Hypervisor": "A hypervisor runs virtual machines by managing resources on a single physical computer, enabling multiple operating systems.",
            "SaaS": "Software as a Service provides applications over the internet, like email or document editors, without local installation.",
            "Hybrid Cloud": "A hybrid cloud blends public internet-based services with private dedicated resources for flexibility and security.",
            "Client-side Virtualization": "Running virtual machines locally on a device allows isolated testing or multi-OS use.",
            "IaaS": "Infrastructure as a Service offers virtual servers and storage over the cloud, reducing the need for physical hardware.",
            "PaaS": "Platform as a Service provides a cloud environment for developing and deploying applications.",
            "VDI": "Virtual Desktop Infrastructure hosts desktops on a server, allowing remote access to a full desktop experience.",
            "Type 1 Hypervisor": "A Type 1 hypervisor runs directly on hardware, offering efficient virtual machine management.",
            "Public Cloud": "Public cloud services provide shared resources over the internet, accessible to multiple users.",
            "Private Cloud": "A private cloud is dedicated to one organization, offering secure and exclusive resource access.",

            // Core 1: Troubleshooting
            "No Boot": "If a computer won’t start, checking power connections ensures electricity is reaching the system.",
            "CPU Overheating": "Overheating occurs when dust blocks airflow or cooling systems fail, risking damage to the processor.",
            "No Wi-Fi": "No wireless signal might mean a disabled adapter, weak signal, or interference from other devices.",
            "POST Beep": "A Power-On Self-Test beep alerts you to hardware issues, like faulty memory or graphics, during startup.",
            "No Display": "A blank screen may indicate a loose monitor cable or graphics card issue needing inspection.",
            "Slow Drive": "A failing hard drive or SSD can slow performance, requiring diagnostic testing.",
            "Printer Jam": "Paper stuck in a printer requires opening it and carefully removing the obstruction.",
            "Blue Light": "A blue power light might indicate a power supply issue, needing further checks.",
            "Network Drop": "Intermittent network loss could stem from a faulty cable or weak wireless signal.",
            "Overheating GPU": "A hot graphics card may need fan cleaning or new thermal paste to cool down.",

            // Core 2: Operating Systems
            "ipconfig": "The ipconfig command in Windows displays network settings, helping you troubleshoot connectivity issues.",
            "chmod": "The chmod command in Linux adjusts who can read, write, or run a file, controlling access.",
            "sfc /scannow": "System File Checker scans and fixes corrupted Windows files to restore system stability.",
            "diskpart": "Diskpart manages disk partitions in Windows, allowing creation, deletion, or formatting of storage sections.",
            "net use": "The net use command connects to network drives, linking shared storage to your computer.",
            "msconfig": "The msconfig tool controls which programs start with Windows, optimizing boot time.",
            "regedit": "Regedit edits the Windows Registry, a database of system and app settings.",
            "chkdsk": "Check Disk scans and repairs disk errors to maintain storage reliability.",
            "sudo": "The sudo command in Linux runs tasks with superuser privileges for administrative control.",
            "tracert": "Traceroute traces the path data takes to a network destination, identifying delays.",

            // Core 2: Security
            "Phishing": "Phishing tricks users into giving away sensitive information through fake emails pretending to be legitimate.",
            "MFA": "Multi-Factor Authentication requires multiple proofs of identity, like a password and a phone code, for better protection.",
            "DDoS": "A Distributed Denial of Service attack floods a server with traffic to make it unavailable to users.",
            "BitLocker": "BitLocker encrypts entire Windows drives, protecting data from unauthorized access if a device is lost.",
            "AI Security": "Artificial Intelligence in security analyzes patterns to spot and stop threats faster than manual methods.",
            "Ransomware": "Ransomware encrypts data and demands payment to unlock it, acting as a digital hostage situation.",
            "SSL/TLS": "Secure Sockets Layer and Transport Layer Security encrypt data over networks, ensuring privacy.",
            "Keylogger": "A keylogger records every keystroke typed, aiming to steal passwords or sensitive data.",
            "Brute Force": "A brute force attack tries every possible password combination to gain access.",
            "Firewall": "A firewall blocks unauthorized network access, protecting systems from external threats.",
            "Social Engineering": "Social engineering manipulates users into revealing confidential information through deception.",
            "VPN Security": "A Virtual Private Network secures remote connections by encrypting data over the internet.",

            // Core 2: Software Troubleshooting
            "BSOD": "A Blue Screen of Death signals a critical Windows error, often from incompatible drivers or hardware faults.",
            "Slow PC": "A slow computer might be due to limited disk space, malware, or high resource usage, needing investigation.",
            "DISM": "Deployment Image Servicing and Management fixes the Windows system image when standard repairs fail.",
            "Frozen App": "A frozen application can be stopped using Task Manager to forcefully end its process.",
            "Malware": "Malware requires antivirus software to detect and remove harmful programs from a system.",
            "Safe Mode": "Safe Mode boots an operating system with minimal drivers to troubleshoot issues.",
            "Driver Update": "Updating drivers resolves hardware conflicts or improves performance.",
            "App Crash": "An application crash might need log checks or reinstallation to fix corrupted files.",
            "Low Memory": "Low memory issues can be fixed by closing apps or adding more RAM to the system.",
            "Corrupt File": "A corrupt file may need replacement or repair to restore functionality.",

            // Core 2: Operational Procedures
            "Troubleshooting Step 1": "Identifying the problem is the first step in solving any technical issue systematically.",
            "ESD Protection": "An anti-static wrist strap prevents electrostatic discharge from damaging sensitive electronics.",
            "UPS": "An Uninterruptible Power Supply keeps devices running during outages, preventing data loss.",
            "Incremental Backup": "An incremental backup saves only files changed since the last backup, making it faster than full backups.",
            "Full Backup": "A full backup saves all data, providing a complete restore point.",
            "Surge Protector": "A surge protector shields equipment from sudden voltage spikes that could cause damage.",
            "RMA": "Return Merchandise Authorization is the process for returning defective products for repair or replacement.",
            "Documentation": "Documenting an issue and its solution ensures a record for future reference.",
            "ESD Mat": "An ESD mat grounds static electricity during repairs, protecting components.",
            "Change Management": "Change management plans system updates to minimize disruptions and ensure stability."
        };

        let currentFlashcard = 0;
        let selectedTerm = null;
        let matchesRemaining = 0;
        let score = 0;
        let currentSection = 0;
        let completedSections = new Set();
        const categoryOrder = ["mobile", "networking", "hardware", "virt-cloud", "troubleshooting", "os", "security", "soft-trouble", "ops"];
        const categoryNames = {
            "mobile": "Mobile Devices (Core 1)",
            "networking": "Networking (Core 1)",
            "hardware": "Hardware (Core 1)",
            "virt-cloud": "Virtualization & Cloud (Core 1)",
            "troubleshooting": "Troubleshooting (Core 1)",
            "os": "Operating Systems (Core 2)",
            "security": "Security (Core 2)",
            "soft-trouble": "Software Troubleshooting (Core 2)",
            "ops": "Operational Procedures (Core 2)"
        };

        const flashcardBtn = document.getElementById("flashcard-btn");
        const matchingBtn = document.getElementById("matching-btn");

        function setActiveMode(activeBtn, inactiveBtn) {
            activeBtn.classList.add("active");
            activeBtn.classList.remove("inactive");
            inactiveBtn.classList.add("inactive");
            inactiveBtn.classList.remove("active");
        }

        function showFlashcards() {
            console.log("Showing flashcards");
            document.getElementById("flashcard-container").style.display = "block";
            document.getElementById("matching-container").style.display = "none";
            setActiveMode(flashcardBtn, matchingBtn);
            loadFlashcard();
        }

        function loadFlashcard() {
            console.log("Loading flashcard", currentFlashcard);
            const card = document.getElementById("flashcard");
            const front = document.querySelector(".flashcard-front");
            const back = document.querySelector(".flashcard-back");
            front.textContent = flashcards[currentFlashcard].front;
            back.textContent = flashcards[currentFlashcard].back;
            card.classList.remove("flipped");
        }

        function nextFlashcard() {
            currentFlashcard = (currentFlashcard + 1) % flashcards.length;
            loadFlashcard();
        }

        document.getElementById("flashcard").addEventListener("click", function() {
            this.classList.toggle("flipped");
        });

        function showMatching() {
            console.log("Showing matching");
            document.getElementById("flashcard-container").style.display = "none";
            document.getElementById("matching-container").style.display = "flex";
            setActiveMode(matchingBtn, flashcardBtn);
            currentSection = 0;
            completedSections.clear();
            setupMatchingSection();
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function playSound(frequency, duration) {
            const oscillator = audioCtx.createOscillator();
            oscillator.type = "sine";
            oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);
            oscillator.connect(audioCtx.destination);
            oscillator.start();
            setTimeout(() => oscillator.stop(), duration);
        }

        function playVictoryFanfare() {
            const frequencies = [600, 800, 1000];
            frequencies.forEach((freq, index) => {
                const oscillator = audioCtx.createOscillator();
                oscillator.type = "sine";
                oscillator.frequency.setValueAtTime(freq, audioCtx.currentTime + index * 0.2);
                oscillator.connect(audioCtx.destination);
                oscillator.start(audioCtx.currentTime + index * 0.2);
                oscillator.stop(audioCtx.currentTime + index * 0.2 + 0.2);
            });
        }

        function addConfetti(element, count = 10) {
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement("div");
                confetti.className = "confetti";
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = `${Math.random() * 100}%`;
                confetti.style.background = ["#ffd700", "#ff4500", "#00ff00"][Math.floor(Math.random() * 3)];
                element.appendChild(confetti);
                setTimeout(() => confetti.remove(), 1000);
            }
        }

        function updateActiveCategory() {
            const categoryButtons = document.querySelectorAll(".category-key button");
            categoryButtons.forEach(btn => btn.classList.remove("active-category"));
            const currentCat = categoryOrder[currentSection];
            const activeBtn = document.querySelector(`.category-key button[data-category="${currentCat}"]`);
            if (activeBtn) activeBtn.classList.add("active-category");
        }

        function updateProgressBar() {
            const progressFill = document.getElementById("progress-fill");
            const progressPercent = (completedSections.size / categoryOrder.length) * 100;
            progressFill.style.width = `${progressPercent}%`;
        }

        function setupMatchingSection() {
            try {
                console.log("Setting up section:", categoryOrder[currentSection]);
                const termsDiv = document.getElementById("matching-terms");
                const defsDiv = document.getElementById("matching-definitions");
                const matchesLeftDiv = document.getElementById("matches-left");
                const scoreDiv = document.getElementById("score");
                const progressDiv = document.getElementById("progress");
                const sectionLabel = document.getElementById("section-label");
                const victoryMessage = document.getElementById("victory-message");
                const body = document.body;

                termsDiv.innerHTML = "<h3>Terms</h3>";
                defsDiv.innerHTML = "<h3>Definitions</h3>";
                victoryMessage.style.display = "none";

                if (completedSections.size === categoryOrder.length) {
                    matchesLeftDiv.textContent = "Matches Left: 0";
                    scoreDiv.textContent = `Final Score: ${score}`;
                    progressDiv.textContent = `Sections Completed: ${completedSections.size}/${categoryOrder.length}`;
                    sectionLabel.textContent = "Game Complete!";
                    body.style.background = "linear-gradient(135deg, #2a5298, #388e3c)";
                    victoryMessage.style.display = "block";
                    playVictoryFanfare();
                    addConfetti(victoryMessage, 20);
                    setTimeout(() => victoryMessage.style.display = "none", 2000);
                    return;
                }

                const currentCat = categoryOrder[currentSection];
                const sectionPairs = matchingPairs.filter(pair => pair.category === currentCat);
                matchesRemaining = sectionPairs.length;
                matchesLeftDiv.textContent = `Matches Left: ${matchesRemaining}`;
                scoreDiv.textContent = `Score: ${score}`;
                progressDiv.textContent = `Sections Completed: ${completedSections.size}/${categoryOrder.length}`;
                sectionLabel.textContent = `Section ${currentSection + 1}: ${categoryNames[currentCat]}`;
                updateActiveCategory();
                updateProgressBar();
                body.style.background = `linear-gradient(135deg, #1e3c72, ${getCategoryColor(currentCat)})`;

                const allTerms = sectionPairs.map(p => ({ term: p.term, category: p.category }));
                const allDefs = shuffle([...sectionPairs]).map(p => ({ def: p.definition, category: p.category }));

                allTerms.forEach(item => {
                    const div = document.createElement("div");
                    div.className = `matching-item ${item.category}`;
                    div.textContent = item.term;
                    div.onclick = () => selectTerm(div);
                    termsDiv.appendChild(div);
                });

                allDefs.forEach(item => {
                    const div = document.createElement("div");
                    div.className = `matching-item ${item.category}`;
                    div.textContent = item.def;
                    div.onclick = () => matchTerm(div);
                    defsDiv.appendChild(div);
                });
            } catch (error) {
                console.error("Error setting up matching section:", error);
                document.getElementById("section-label").textContent = "Error loading section. Please reset.";
            }
        }

        function getCategoryColor(category) {
            const colors = {
                "mobile": "#e3f2fd",
                "networking": "#b3e5fc",
                "hardware": "#c8e6c9",
                "virt-cloud": "#f3e5f5",
                "troubleshooting": "#fff3e0",
                "os": "#f0f4c3",
                "security": "#ffcdd2",
                "soft-trouble": "#dcedc8",
                "ops": "#e0f7fa"
            };
            return colors[category] || "#2a5298";
        }

        function switchCategory(category) {
            const index = categoryOrder.indexOf(category);
            if (index !== -1) {
                currentSection = index;
                setupMatchingSection();
            } else {
                console.error(`Invalid category: ${category}`);
            }
        }

        function selectTerm(item) {
            if (selectedTerm) selectedTerm.classList.remove("selected");
            const allItems = document.querySelectorAll(".matching-item");
            allItems.forEach(i => i.classList.remove("incorrect"));
            if (item.classList.contains("correct")) return;
            selectedTerm = item;
            selectedTerm.classList.add("selected");
            console.log("Selected term:", item.textContent);
        }

        function showModal(term, definition) {
            console.log("Showing modal for:", term);
            const modal = document.getElementById("explanation-modal");
            const modalTitle = document.getElementById("modal-title");
            const modalDefinition = document.getElementById("modal-definition");
            const modalExplanation = document.getElementById("modal-explanation");

            modalTitle.textContent = `Correct Match: ${term}`;
            modalDefinition.textContent = `Definition: ${definition}`;
            modalExplanation.textContent = explanations[term] || "This term is key to the new CompTIA A+ exams.";
            modal.style.display = "block";
            document.querySelector(".modal-overlay").style.display = "block";
        }

        function closeModal() {
            const modal = document.getElementById("explanation-modal");
            modal.style.display = "none";
            document.querySelector(".modal-overlay").style.display = "none";
            if (matchesRemaining === 0) {
                setTimeout(() => {
                    completedSections.add(categoryOrder[currentSection]);
                    playSound(800, 300);
                    currentSection = (currentSection + 1) % categoryOrder.length;
                    while (completedSections.has(categoryOrder[currentSection]) && completedSections.size < categoryOrder.length) {
                        currentSection = (currentSection + 1) % categoryOrder.length;
                    }
                    setupMatchingSection();
                }, 500);
            }
        }

        function matchTerm(defItem) {
            if (!selectedTerm || defItem.classList.contains("correct")) return;
            const term = selectedTerm.textContent;
            const def = defItem.textContent;
            console.log("Matching attempt:", term, "with", def);
            const pair = matchingPairs.find(p => p.term === term && p.definition === def);
            const matchesLeftDiv = document.getElementById("matches-left");
            const scoreDiv = document.getElementById("score");

            if (pair) {
                selectedTerm.classList.add("correct");
                defItem.classList.add("correct");
                selectedTerm.onclick = null;
                defItem.onclick = null;
                playSound(600, 200);
                addConfetti(selectedTerm, 10);
                addConfetti(defItem, 10);
                matchesRemaining--;
                score += 10;
                matchesLeftDiv.textContent = `Matches Left: ${matchesRemaining}`;
                scoreDiv.textContent = `Score: ${score}`;
                showModal(term, def);
            } else {
                selectedTerm.classList.add("incorrect");
                defItem.classList.add("incorrect");
                playSound(200, 100);
                score -= 5;
                scoreDiv.textContent = `Score: ${score}`;
                setTimeout(() => {
                    selectedTerm.classList.remove("incorrect");
                    defItem.classList.remove("incorrect");
                }, 1000);
                selectedTerm.classList.remove("selected");
                selectedTerm = null;
            }
        }

        function resetMatching() {
            currentSection = 0;
            score = 0;
            completedSections.clear();
            document.body.style.background = "linear-gradient(135deg, #1e3c72, #2a5298)";
            setupMatchingSection();
        }

        showFlashcards();
    </script>
</body>
</html>